<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>libjson-rpc-cpp by cinemast</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">libjson-rpc-cpp</h1>
        <p class="header">C++ framework for json-rpc (json remote procedure call)</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/cinemast/libjson-rpc-cpp/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/cinemast/libjson-rpc-cpp/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/cinemast/libjson-rpc-cpp">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/cinemast">cinemast</a></p>


      </header>
      <section>
        <p><a href="https://travis-ci.org/cinemast/libjson-rpc-cpp"><img src="https://travis-ci.org/cinemast/libjson-rpc-cpp.png?branch=master" alt="Build Status"></a></p>

<h1>
<a id="libjson-rpc-cpp" class="anchor" href="#libjson-rpc-cpp" aria-hidden="true"><span class="octicon octicon-link"></span></a>libjson-rpc-cpp</h1>

<p>This C++ library provides a json-rpc (remote procedure call) framework for Linux and MacOS (or any other UNIX derivate).
It is fully JSON-RPC 2.0 compatible (<a href="http://www.jsonrpc.org/specification">JSON-RPC 2.0</a>) and provides additional features, such as generic authentication mechanisms.</p>

<p><strong>Notice: This framework is currently in a beta phase. Bug Reports are very welcome!</strong></p>

<p><img src="https://github.com/cinemast/libjson-rpc-cpp/blob/master/dev/artwork/logo.png?raw=true" alt="libjson-rpc-cpp logo"></p>

<h2>
<a id="5-good-reasons-for-using-libjson-rpc-cpp-in-your-next-rpc-project" class="anchor" href="#5-good-reasons-for-using-libjson-rpc-cpp-in-your-next-rpc-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>5 good reasons for using libjson-rpc-cpp in your next RPC project:</h2>

<ul>
<li>Full JSON-RPC 2.0 Support (batch requests, parameter type and name checking, ...).</li>
<li>jsonrpcstub: Generates automatically C++ stub-classes for your json-rpc client AND server.</li>
<li>Embedded HTTP server to provide simple interfaces for your json-rpc server application.</li>
<li>Embedded HTTP client to connect easily via HTTP protocol.</li>
<li>Super liberal <a href="http://en.wikipedia.org/wiki/MIT_License">MIT-License</a>. </li>
</ul>

<p><strong>Other good reasons to use libjson-rpc-cpp</strong></p>

<ul>
<li>Easy to use.</li>
<li>Method parameter names and checks can be easily configured through a simple json configuration file.</li>
<li>Very verbose error reporting.</li>
<li>Easy to use <a href="http://www.cmake.org">cmake</a> cross platform build system.</li>
<li>Clean and simple architecture.</li>
<li>Tested under MacOS X (10.7,10.8), Linux (Debian 8 64-bit).</li>
<li>Tested under RaspberryPi (raspbian). This library offers great opportunities to remotely control your raspberry pi.</li>
<li>Automated testing using <code>make test</code>
</li>
<li>
<p>Useful Examples provided. e.g. XBMC Remote using json-rpc client part and stub generator.</p>

<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>

<p><img src="https://github.com/cinemast/libjson-rpc-cpp/blob/develop/dev/artwork/overview.png?raw=true" alt="libjson-rpc-cpp logo"></p>
</li>
</ul>

<h2>
<a id="build-the-framework" class="anchor" href="#build-the-framework" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build the framework</h2>

<p>You will need <a href="http://git-scm.com/downloads">Git</a> and <a href="http://www.cmake.org/cmake/resources/software.html">CMake</a>. You can click on the links to download the latest versions. <a href="http://curl.haxx.se/libcurl/">libcurl</a> is also required but should already be installed on most systems.
CMake must be Version 2.6 or later.</p>

<p>Under Debian based systems type:</p>

<div class="highlight highlight-sh"><pre>sudo apt-get install libcurl4-openssl-dev libjsoncpp-dev libargtable2-dev libboost-test-dev cmake</pre></div>

<p>Open a terminal and copy the following commands:</p>

<div class="highlight highlight-sh"><pre>git clone git://github.com/cinemast/libjson-rpc-cpp.git
mkdir -p libjson-rpc-cpp/build
<span class="pl-s3">cd</span> libjson-rpc-cpp/build
cmake .. <span class="pl-k">&amp;&amp;</span> make
sudo make install   <span class="pl-c">#Not required, but makes it easier to use</span>
sudo ldconfig       <span class="pl-c">#only required for linux</span></pre></div>

<p>That's it!</p>

<p>If you are not happy with it, simply uninstall it from your system using (inside the build the directory):</p>

<div class="highlight highlight-sh"><pre>sudo make uninstall</pre></div>

<p><strong>Build options:</strong></p>

<ul>
<li>
<code>-DCOMPILE_TESTS=NO</code> disables unit test suite.</li>
<li>
<code>-DCOMPILE_STUBGEN=NO</code> disables building the stubgenerator.</li>
<li>
<code>-DCOMPILE_EXAMPLES=NO</code> disables examples.</li>
<li>
<code>-DHTTP_SERVER_MONGOOSE=NO</code> disable the embedded mongoose webserver.</li>
<li>
<code>-DHTTP_CLIENT_CURL=NO</code> disable the curl client.</li>
<li>
<code>-DSOCKET_SERVER=YES</code> enable the socket server.</li>
<li>
<code>-DSOCKET_CLIENT=YES</code> enable the socket client.</li>
</ul>

<h2>
<a id="simple-example" class="anchor" href="#simple-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple Example</h2>

<p>This example will show the most simple way to create a rpc server and client. If you only need the server, ignore step 4. If you only need the client, ignore step 3. You can find all resources of this sample in the <code>src/examples</code> directory of this repository.</p>

<h3>
<a id="step-1-writing-the-specification-file" class="anchor" href="#step-1-writing-the-specification-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Writing the specification file</h3>

<div class="highlight highlight-json"><pre>[
    {
        <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>sayHello<span class="pl-pds">"</span></span>,
        <span class="pl-s1"><span class="pl-pds">"</span>params<span class="pl-pds">"</span></span>: { 
            <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>Peter<span class="pl-pds">"</span></span>
        },
        <span class="pl-s1"><span class="pl-pds">"</span>returns<span class="pl-pds">"</span></span> : <span class="pl-s1"><span class="pl-pds">"</span>Hello Peter<span class="pl-pds">"</span></span>
    },
    {
        <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s1"><span class="pl-pds">"</span>notifyServer<span class="pl-pds">"</span></span>,
        <span class="pl-s1"><span class="pl-pds">"</span>params<span class="pl-pds">"</span></span>: <span class="pl-c1">null</span>
    }
]</pre></div>

<p>The type of a return value or parameter is defined by the literal assigned to it. In this example you can see how to specify methods and notifications.</p>

<h3>
<a id="step-2-generate-the-stubs-for-client-and-server" class="anchor" href="#step-2-generate-the-stubs-for-client-and-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Generate the stubs for client and server</h3>

<p>Call jsonrpcstub:</p>

<div class="highlight highlight-sh"><pre>jsonrpcstub spec.json --cpp-server=AbstractStubServer --cpp-client=StubClient</pre></div>

<p>This generates a serverstub and a clientstub class.</p>

<h3>
<a id="step-3-implement-the-abstract-server-stub" class="anchor" href="#step-3-implement-the-abstract-server-stub" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: implement the abstract server stub</h3>

<p>Extend the abstract server stub and implement all pure virtual (abstract) methods defined in <code>spec.json</code>.</p>

<div class="highlight highlight-cpp"><pre>#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">"</span>abstractsubserver.h<span class="pl-pds">"</span></span>
#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">&lt;</span>jsonrpccpp/server/connectors/httpserver.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">using</span> <span class="pl-st">namespace</span> <span class="pl-en">jsonrpc</span><span class="pl-k">;</span>
<span class="pl-k">using</span> <span class="pl-st">namespace</span> <span class="pl-en">std</span><span class="pl-k">;</span>

<span class="pl-st">class</span> <span class="pl-en">MyStubServer</span> : <span class="pl-st">public</span> <span class="pl-en">AbstractStubServer</span>
{
    <span class="pl-s">public:</span>
        <span class="pl-en">MyStubServer</span>(AbstractServerConnector &amp;connector);

        <span class="pl-s">virtual</span> <span class="pl-st">void</span> <span class="pl-en">notifyServer</span>();
        <span class="pl-s">virtual</span> std::string <span class="pl-en">sayHello</span>(<span class="pl-s">const</span> std::string&amp; name);
};

<span class="pl-en">MyStubServer::MyStubServer</span>(AbstractServerConnector &amp;connector) :
    AbstractStubServer(connector)
{
}
<span class="pl-st">void</span> <span class="pl-en">MyStubServer::notifyServer</span>()
{
    cout &lt;&lt; <span class="pl-s1"><span class="pl-pds">"</span>Server got notified<span class="pl-pds">"</span></span> &lt;&lt; endl;
}
string <span class="pl-en">MyStubServer::sayHello</span>(<span class="pl-s">const</span> string &amp;name)
{
    <span class="pl-k">return</span> <span class="pl-s1"><span class="pl-pds">"</span>Hello <span class="pl-pds">"</span></span> + name;
}

<span class="pl-st">int</span> <span class="pl-en">main</span>()
{
    HttpServer <span class="pl-vo">httpserver</span>(<span class="pl-c1">8383</span>);
    MyStubServer <span class="pl-vo">s</span>(httpserver);
    s.<span class="pl-s3">StartListening</span>();
    <span class="pl-s3">getchar</span>();
    s.<span class="pl-s3">StopListening</span>();
    <span class="pl-k">return</span> <span class="pl-c1">0</span>;
}</pre></div>

<p>In the main function the concrete server is instantiated and started. That is all for the server. Any JSON-RPC 2.0 compliant client can now connect to your server.</p>

<p>Compile the server with:</p>

<div class="highlight highlight-sh"><pre>g++ main.cpp -ljsonrpccppserver -o sampleserver</pre></div>

<h3>
<a id="step-4-create-the-client-application" class="anchor" href="#step-4-create-the-client-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4: Create the client application</h3>

<div class="highlight highlight-cpp"><pre>#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">&lt;</span>iostream<span class="pl-pds">&gt;</span></span>

#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">"</span>stubclient.h<span class="pl-pds">"</span></span>
#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">&lt;</span>jsonrpccpp/client/connectors/httpclient.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">using</span> <span class="pl-st">namespace</span> <span class="pl-en">jsonrpc</span><span class="pl-k">;</span>
<span class="pl-k">using</span> <span class="pl-st">namespace</span> <span class="pl-en">std</span><span class="pl-k">;</span>

<span class="pl-st">int</span> <span class="pl-en">main</span>()
{
    HttpClient <span class="pl-vo">httpclient</span>(<span class="pl-s1"><span class="pl-pds">"</span>http://localhost:8383<span class="pl-pds">"</span></span>);
    StubClient <span class="pl-vo">c</span>(httpclient);
    <span class="pl-k">try</span>
    {
        cout &lt;&lt; c.<span class="pl-s3">sayHello</span>(<span class="pl-s1"><span class="pl-pds">"</span>Peter Knafl<span class="pl-pds">"</span></span>) &lt;&lt; endl;
        c.<span class="pl-s3">notifyServer</span>();
    }
    <span class="pl-k">catch</span> (JsonRpcException e)
    {
        cerr &lt;&lt; e.<span class="pl-s3">what</span>() &lt;&lt; endl;
    }
}</pre></div>

<p>Compile the client with:</p>

<div class="highlight highlight-sh"><pre>g++ main.cpp -ljsonrpccppclient -o sampleclient</pre></div>

<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h2>

<ul>
<li>
<a href="http://www.nasa.gov/centers/ames/home/">NASA Ames Research Center</a>: use it to obtain aircraft state information from an aircraft simulator.</li>
<li>
<a href="https://github.com/macpod/lasershark_3dp">LaseShark 3D Printer</a>: used to control the firmware of the 3D printer.</li>
<li>
<a href="https://github.com/ethereum/cpp-ethereum">cpp-ethereum</a>: a distributed computing framework.</li>
<li>
<a href="https://github.com/mage/mage-sdk-cpp">mage-sdk-cpp</a>: a game engine.</li>
<li>
<a href="http://www.bitmovin.net">bitcodin</a>: a scaleable cloud based video transcoding platform.</li>
</ul>

<p>If you use this library and find it useful, I would be very pleased if you let me know about it.</p>

<h2>
<a id="roadmap-for-next-release" class="anchor" href="#roadmap-for-next-release" aria-hidden="true"><span class="octicon octicon-link"></span></a>Roadmap for next release</h2>

<ul>
<li>JSON RPC 1 legacy support</li>
<li>libmicrohttpd server connector (to replace mongoose, because of license issues)</li>
<li>Generate client stubs for other languages.</li>
</ul>

<h2>
<a id="changelogs" class="anchor" href="#changelogs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Changelogs</h2>

<p>Changelogs can be found <a href="https://github.com/cinemast/libjson-rpc-cpp/blob/master/CHANGELOG.md">here</a>.</p>

<h2>
<a id="known-issues" class="anchor" href="#known-issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Known issues</h2>

<ul>
<li>Due to a bug in gcc 4.6.2 this project is not compiling under Mac OS gcc. Use clang++ instead. <a href="http://stackoverflow.com/questions/8887864/template-base-constructor-call-in-member-initialization-list-error">See here</a>
</li>
</ul>

<h2>
<a id="licsense" class="anchor" href="#licsense" aria-hidden="true"><span class="octicon octicon-link"></span></a>Licsense</h2>

<p>This framework is licensed under <a href="http://en.wikipedia.org/wiki/MIT_License">MIT</a>.</p>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul>
<li>
<a href="http://jsoncpp.sourceforge.net">jsoncpp</a> (licensed under MIT)
jsoncpp is a very easy to use and powerful json library. 
It is used for all the JSON parsing and generation inside this library.</li>
<li>
<a href="https://github.com/valenok/mongoose">mongoose</a> (licensed under MIT)
mongoose is a http server that can be easily embedded into other applications. 
It is used here for the HttpConnector to provide HTTP json-rpc Requests.</li>
<li>
<a href="http://curl.haxx.se">curl</a>
lib curl is used for the HttpClient connections.</li>
<li>
<a href="http://argtable.sourceforge.net/">argtable2</a> (licensed under LGPL)
libargtable2 is used for handling commandline parameters of the jsonrpcstub tool.</li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-25068518-5");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
